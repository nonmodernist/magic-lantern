<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magic Lantern - Search Results</title>
    <link rel="stylesheet" href="../../shared/classless.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <aside>
            Vol. 5.‚ÄîNo. 0.2.<br>
            SUMMER, 2025.</aside>
        <h1>MAGIC LANTERN</h1>
        <p>Comprehensive Search Results</p>
    </header>

    <nav>
        <a href="../home/index.html">üîç Search</a>
        <a href="../search-results/index.html" aria-current="page">üìä Results</a>
        <a href="../profile-selector/index.html">‚öôÔ∏è Profiles</a>
        <a href="../about/index.html">üìñ About</a>
    </nav>

    <div id="results-layout">
        <aside id="results-tools">
            <!-- Selection Tools -->
            <section id="selection-tools">
                <h3>Selection</h3>
                <button onclick="selectAll()" id="select-all-btn">
                    <span>‚òë</span> Select All
                </button>
                <button onclick="clearAll()" id="clear-all-btn" hidden>
                    <span>‚òê</span> Clear All
                </button>
                <!-- <button onclick="selectHighScores()">
                    <span>‚≠ê</span> High Scores (80+)
                </button>
                <button onclick="selectByPublication()">
                    <span>üì∞</span> By Publication...
                </button> -->
            </section>

            <!-- Export Tools -->
            <section id="export-tools">
                <h3>Export</h3>
                <button onclick="exportSelected()" id="export-selected-btn" disabled>
                    <span>‚Üì</span> Selected (<output>0</output>)
                </button>
                <button onclick="exportAll()">
                    <span>üíæ</span> All Results
                </button>
                <!-- TODO add back in once these work
                    <button onclick="exportFilmSummary()">
                    <span>üìã</span> Film Summary
                </button>
                <button onclick="copyAsCSV()">
                    <span>üìä</span> Copy as CSV
                </button>
                <button onclick="generateBibliography()">
                    <span>üìö</span> Bibliography
                </button> -->
            </section>

            <!-- Film Jump List -->
            <section id="jump-list">
                <h3>Films</h3>
                <select size="8" onchange="jumpToFilm(this.value)">
                    <!-- Populated by JS -->
                </select>
            </section>
        </aside>

        <main id="results-main">
            <!-- Enhanced Summary Section -->
            <section id="summary" class="card">
                <header>
                    <h2>Search Summary</h2>
                    <div id="session-actions">
                        <button onclick="loadResultsFile()">üìÇ Load Different Results</button>
                    </div>
                </header>
                
                <!-- Session Info (moved from sidebar) -->
                <div id="session-info">
                    <p>
                        <time id="results-timestamp"></time>
                        <span id="profile-used">Profile: <output>Default</output></span>
                        <span id="loaded-file-info" hidden>File: <output id="loaded-filename"></output></span>
                    </p>
                </div>

                <!-- Quick Stats (moved from sidebar) -->
                <div id="quick-stats">
                    <dl>
                        <div>
                            <dt>Films Processed</dt>
                            <dd id="films-count">0</dd>
                        </div>
                        <div>
                            <dt>Total Sources</dt>
                            <dd id="sources-count">0</dd>
                        </div>
                        <div>
                            <dt>Selected</dt>
                            <dd id="selected-count">0</dd>
                        </div>
                    </dl>
                </div>
            </section>

            <!-- Film Results -->
            <div id="film-results-container">
                <!-- Results here -->
            </div>
        </main>
    </div>

    <!-- Back to Top (moved to bottom right) -->
    <a href="#top" id="back-to-top" aria-label="Back to top">
        <span>‚Üë</span>
    </a>

    <!-- Film Result Template -->
    <template id="film-result-template">
        <article class="film-result">
            <header>
                <h3></h3>
                <aside></aside>
            </header>
            <div class="strategies" hidden>
                <!-- Strategy breakdown -->
            </div>
            <div class="sources">
                <!-- Source cards -->
            </div>
        </article>
    </template>

    <!-- Source Card Template -->
    <template id="source-template">
        <article class="source">
            <div class="source-select">
                <input type="checkbox" id="">
                <label for="">Select</label>
            </div>
            <header>
                <h4></h4>
                <aside class="score"></aside>
            </header>
            <blockquote></blockquote>
            <footer>
                <a role="button" href="" target="_blank">Lantern</a>
                <a role="button" href="" target="_blank">Archive</a>
                <button>Fetch Full Text</button>
            </footer>
        </article>
    </template>

    <script src="script.js"></script>
</body>

</html>