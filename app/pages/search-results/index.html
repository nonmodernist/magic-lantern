<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Magic Lantern - Search Results</title>
    <link rel="stylesheet" href="../../shared/classless.css">
</head>
<body>
    <header>
        <aside>
            Vol. 5.‚ÄîNo. 0.2.<br>
            SUMMER, 2025.
        </aside>
        <h1>‚ú® MAGIC LANTERN ‚ú®</h1>
        <p>Search Results</p>
    </header>

    <nav>
        <a href="../home/index.html">üîç Search</a>
        <a href="../search-results/index.html" aria-current="page">üìä Results</a>
        <a href="../profile-selector/index.html">‚öôÔ∏è Profiles</a>
        <a href="../about/index.html">üìñ About</a>
    </nav>

    <main>
        <!-- Action Toolbar -->
        <menu type="toolbar" data-sticky="true">
            <button onclick="loadResultsFile()">üìÇ Load Results File</button>
            <button onclick="selectAll()" id="select-all-btn">Select All</button>
            <button onclick="clearAll()" id="clear-all-btn" hidden>Clear All</button>
            <button onclick="exportSelected()" id="export-selected-btn" hidden>
                Export Selected (<data id="selected-count">0</data>)
            </button>
            <button onclick="exportResults()">Export JSON</button>
        </menu>

        <!-- Results Summary -->
        <article>
            <header>
                <h2>üìä SEARCH SUMMARY</h2>
                <time id="results-timestamp"></time>
            </header>

            <aside id="loaded-file-info" hidden>
                <p><strong>Loaded from file:</strong> <span id="loaded-filename"></span></p>
            </aside>

            <div data-grid="stats">
                <div>
                    <data id="films-count">0</data>
                    <label>Films Processed</label>
                </div>
                <div>
                    <data id="sources-count">0</data>
                    <label>Total Sources Found</label>
                </div>
                <div>
                    <data id="unique-count">0</data>
                    <label>Unique Sources</label>
                </div>
                <div>
                    <data id="treasures-count">0</data>
                    <label>Treasure Finds</label>
                </div>
            </div>
        </article>

        <!-- Next Steps Guide -->
        <article id="next-steps-guide" hidden>
            <h2>üí° WHAT TO DO NEXT</h2>
            
            <div data-grid="cards">
                <div>
                    <data value="1">1</data>
                    <h3>Review & Select</h3>
                    <p>Scan through your results and check the boxes next to promising sources. Look for:</p>
                    <ul>
                        <li>High scores (80+)</li>
                        <li>Relevant excerpts</li>
                        <li>Variety of publications</li>
                    </ul>
                </div>
                
                <div>
                    <data value="2">2</data>
                    <h3>Export Your Finds</h3>
                    <p>Click "Export Selected" to save your chosen sources, or "Export JSON" for everything.</p>
                    <ul>
                        <li>Selected sources ‚Üí focused dataset</li>
                        <li>Full export ‚Üí complete archive</li>
                        <li>Both save as JSON files</li>
                    </ul>
                </div>
                
                <div>
                    <data value="3">3</data>
                    <h3>Deep Dive</h3>
                    <p>Visit sources on Lantern to read full articles in context. The "View on Lantern" links take you directly there.</p>
                    <ul>
                        <li>Read surrounding pages</li>
                        <li>Check publication dates</li>
                        <li>Note article placement</li>
                    </ul>
                </div>
            </div>
            
            <section>
                <h3>üéØ Pro Tips</h3>
                <div data-grid="tips">
                    <aside>
                        <strong>Score Guide:</strong> 
                        Sources scoring 80+ often contain substantial content. 
                        60-79 = good mentions. 
                        Below 60 = brief references.
                    </aside>
                    <aside>
                        <strong>Publication Patterns:</strong> 
                        Notice which publications cover your films most. 
                        This reveals editorial interests and audience demographics.
                    </aside>
                    <aside>
                        <strong>Date Clusters:</strong> 
                        Sources often cluster around release dates, 
                        but pre-release publicity and later retrospectives can be goldmines.
                    </aside>
                    <aside>
                        <strong>Strategy Success:</strong> 
                        The strategy bars show which searches worked best. 
                        Use this to refine future searches.
                    </aside>
                </div>
            </section>
            
            <footer>
                <button onclick="dismissGuide()">Got it, thanks!</button>
                <label>
                    <input type="checkbox" id="dont-show-guide"> 
                    Don't show this again
                </label>
            </footer>
        </article>

        <!-- Film Results Container -->
        <div id="film-results-container" data-loading="true">
            <div aria-busy="true">
                <p>Retrieving your research findings...</p>
            </div>
        </div>
    </main>

    <!-- Film Result Template -->
    <template id="film-result-template">
        <article data-film="true">
            <header>
                <h3 data-film-title></h3>
                <p data-film-meta></p>
                <data data-sources-count></data>
            </header>

            <section data-strategies="true">
                <h4>Search Strategy Performance</h4>
                <div data-list="strategies"></div>
            </section>

            <section data-sources="true">
                <h4>Sources Found</h4>
                <div data-list="sources"></div>
            </section>
        </article>
    </template>

    <!-- Source Item Template -->
    <template id="source-item-template">
        <div data-source="true">
            <input type="checkbox" data-source-select>
            <data data-score></data>
            <header>
                <h5 data-publication></h5>
                <small data-meta></small>
            </header>
            <blockquote data-excerpt></blockquote>
            <menu type="toolbar">
                <a href="#" data-link="lantern" role="button">View on Lantern ‚Üí</a>
                <a href="#" data-link="archive">Internet Archive ‚Üí</a>
                <button data-fetch="true" disabled>Fetch Full Text</button>
            </menu>
        </div>
    </template>

    <script src="script.js"></script>
</body>
</html>